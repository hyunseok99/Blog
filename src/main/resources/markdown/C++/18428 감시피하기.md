---
createdAt: 2025-08-02T18:52:14.5526686
modifiedAt: 2025-08-02T18:52:14.5526686
---
- _N_x_N_ 크기의 복도가 있다. 복도는 1x1 크기의 칸으로 나누어지며, 특정한 위치에는 선생님, 학생, 혹은 장애물이 위치할 수 있다. 현재 몇 명의 학생들은 수업시간에 몰래 복도로 빠져나왔는데, 복도로 빠져나온 학생들은 선생님의 감시에 들키지 않는 것이 목표이다.

- 각 선생님들은 자신의 위치에서 상, 하, 좌, 우 4가지 방향으로 감시를 진행한다. 단, 복도에 장애물이 위치한 경우, 선생님은 장애물 뒤편에 숨어 있는 학생들은 볼 수 없다. 또한 선생님은 상, 하, 좌, 우 4가지 방향에 대하여, 아무리 멀리 있더라도 장애물로 막히기 전까지의 학생들은 모두 볼 수 있다고 가정하자.

- 본 문제에서 위치 값을 나타낼 때는 (행,열)의 형태로 표현한다. 선생님이 존재하는 칸은 T, 학생이 존재하는 칸은 S, 장애물이 존재하는 칸은 O로 표시하였다.

- 첫째 줄에 자연수 _N_이 주어진다. (3 ≤ _N_ ≤ 6) 둘째 줄에 _N_개의 줄에 걸쳐서 복도의 정보가 주어진다. 각 행에서는 _N_개의 원소가 공백을 기준으로 구분되어 주어진다. 해당 위치에 학생이 있다면 S, 선생님이 있다면 T, 아무것도 존재하지 않는다면 X가 주어진다.

- 단, 전체 선생님의 수는 5이하의 자연수, 전체 학생의 수는 30이하의 자연수이며 항상 빈 칸의 개수는 3개 이상으로 주어진다.

- 첫째 줄에 정확히 3개의 장애물을 설치하여 모든 학생들을 감시로부터 피하도록 할 수 있는지의 여부를 출력한다. 모든 학생들을 감시로부터 피하도록 할 수 있다면 "`YES`", 그렇지 않다면 "`NO`"를 출력한다.

- 생각 흐름
	- 3개의 장애물을 설치 위치 정하는게 핵심 -> 백트래킹으로 경우 찾기
	- 3개 설치 위치 정해지면 학생 감지 가능 여부 수행 
	- 학생 감지 여부에서 재귀 호출 리턴하다가 항상 true 되는 문제 있었음. 
	  -> bool check를 이용해서 따로 학생 감지 체크 변수 이용

``` c++
#include <iostream>
#include <vector>
#include <string>
#include <utility>
using namespace std;

int n;
string res = "NO";

// 상 하 좌 우
int dx[4] = {-1, 1, 0, 0};
int dy[4] = {0, 0, -1, 1};

// 각각 선생, 학생 위치 
vector<pair<int, int>> teacherPos;
vector<pair<int, int>> studentPos;

void move(int x, int y, int dir, vector<vector<char>>& arr, bool &check) {
	int nx = x + dx[dir];
	int ny = y + dy[dir];
	if (nx >= 0 && nx < n && ny >= 0 && ny < n) {
		if (arr[nx][ny] == 'S') {
			check = false;
			return;
		}
		else if (arr[nx][ny] == 'O') {
			return;
		}
		else {
			move(nx, ny, dir, arr, check);
		}
	}
	return;

}


bool isSecured(vector<vector<char>>& arr) {
	for (int i = 0; i < teacherPos.size(); i++) {
		int x = teacherPos[i].first;
		int y = teacherPos[i].second;
		for (int dir = 0; dir < 4; dir++) {
			bool check = true;
			move(x, y, dir, arr, check);
			if (check == false) {
				return false;
			}
		}
	}
	return true;
}

void backTracking(int lev, vector<vector<char>> &arr, vector<vector<bool>> &flag) {
	if(lev == 3){
		if(isSecured){
			res = "YES";
		}
		return;
	}
	for(int i=0; i < n; i++){
		for(int j=0; j < n; j++){
			if(arr[i][j]=='X' && !flag[i][j]){
				flag[i][j] = true;
				arr[i][j] = 'O';
				backTracking(lev+1, arr, flag);
				arr[i][j] = 'X';
				flag[i][j] = false;
			}
		}
	}
}

int main() {
	cin >> n;
	vector<vector<char>> arr(n, vector<char>(n));
	vector<vector<bool>> flag(n, vector<bool>(n, false));
	
	for (int i = 0; i < n; i++) {
		for(int j=0; j < n; j++){
			char tmp;
			cin >> tmp;
			arr[i][j] = tmp;
			if(tmp == 'T') teacherPos.push_back({i, j});
			if(tmp == 'S') studentPos.push_back({i, j});
		}
	}

	backTracking(0,arr,flag);
	
	cout << res;
		
	return 0;
}

```
